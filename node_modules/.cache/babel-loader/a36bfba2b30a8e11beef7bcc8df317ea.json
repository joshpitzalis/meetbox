{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nimport { useMachine } from \"@xstate/react\";\nimport { useState } from \"react\";\nimport { assign, Machine } from \"xstate\";\nimport Layout from \"../components/Layout\";\nimport Calendar from \"../features/schedule/components/Calendar\";\nimport TimeBar from \"../features/schedule/components/TimeBar\";\nimport firestore from \"../sideEffects/firebase\";\nimport Next from \"../static/svg/NextStep.jsx\";\n\nvar createMeeting =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(event) {\n    var payload, db;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            payload = event.payload;\n            _context.next = 3;\n            return firestore();\n\n          case 3:\n            db = _context.sent;\n            db.collection(\"meetings\").add({\n              options: _JSON$stringify(payload)\n            }).catch(function (error) {\n              return error;\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function createMeeting(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar scheduleMachine = Machine({\n  id: \"schedule\",\n  initial: \"calendar\",\n  states: {\n    calendar: {\n      on: {\n        CONFIRMED_DATES: \"times\"\n      }\n    },\n    times: {\n      on: {\n        CONFIRMED_TIMES: \"loading\",\n        ADDED_NEW_DATE: \"calendar\"\n      }\n    },\n    loading: {\n      invoke: {\n        id: \"createMeeting\",\n        src: function src(context, event) {\n          return createMeeting(event);\n        },\n        onDone: {\n          target: \"ready\"\n        },\n        onError: {\n          target: \"failure\",\n          actions: assign({\n            error: function error(context, event) {\n              return event.data;\n            }\n          })\n        }\n      }\n    },\n    ready: {\n      on: {\n        SELECTED_A_DATE: \"confirmed\"\n      }\n    },\n    confirmed: {\n      type: \"final\"\n    },\n    failure: {\n      type: \"final\"\n    }\n  }\n});\nvar propTypes = {};\nvar defaultProps = {};\n\nvar getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var db, meetings;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return firestore();\n\n          case 2:\n            db = _context2.sent;\n            _context2.next = 5;\n            return db.collection(\"meetings\").get().then(function (snap) {\n              return snap.forEach(function (doc) {\n                return doc.data();\n              });\n            }).catch(function (error) {\n              return error;\n            });\n\n          case 5:\n            meetings = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              meetings: meetings,\n              dog: \"dogx\"\n            });\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getInitialProps() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default function index(_ref3) {\n  var meetings = _ref3.meetings,\n      dog = _ref3.dog;\n  var tomorrow = new Date(new Date(new Date().setDate(new Date().getDate() + 1)).setHours(0, 0, 0, 0));\n\n  var _useState = useState(_defineProperty({}, tomorrow, [[13, 14]])),\n      _useState2 = _slicedToArray(_useState, 2),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  var _useMachine = useMachine(scheduleMachine),\n      _useMachine2 = _slicedToArray(_useMachine, 2),\n      current = _useMachine2[0],\n      send = _useMachine2[1];\n\n  console.log(\"meetings\", meetings, dog);\n  return React.createElement(Layout, null, React.createElement(\"section\", {\n    className: \"vh-100 vw-100 flex flex-column items-center justify-around pa0 ma0\"\n  }, current.value === \"calendar\" && React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    className: \"f1\"\n  }, \"Pick up to 3 dates to meet...\"), React.createElement(Calendar, {\n    handleSelect: setDates,\n    dates: dates\n  }), React.createElement(Next, {\n    action: function action() {\n      return send(\"CONFIRMED_DATES\");\n    },\n    className: \"pointer grow\"\n  })), current.value === \"times\" && React.createElement(React.Fragment, null, React.createElement(TimeBar, {\n    dates: dates,\n    send: send,\n    setDates: setDates\n  }), React.createElement(Next, {\n    action: function action() {\n      return send({\n        type: \"CONFIRMED_TIMES\",\n        payload: dates\n      });\n    },\n    className: \"pointer grow gray\"\n  }))));\n}\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = getInitialProps;","map":{"version":3,"sources":["/Users/joshpitzalis/Desktop/meetbox/pages/index.jsx"],"names":["useMachine","useState","assign","Machine","Layout","Calendar","TimeBar","firestore","Next","createMeeting","event","payload","db","collection","add","options","catch","error","scheduleMachine","id","initial","states","calendar","on","CONFIRMED_DATES","times","CONFIRMED_TIMES","ADDED_NEW_DATE","loading","invoke","src","context","onDone","target","onError","actions","data","ready","SELECTED_A_DATE","confirmed","type","failure","propTypes","defaultProps","getInitialProps","get","then","snap","forEach","doc","meetings","dog","index","tomorrow","Date","setDate","getDate","setHours","dates","setDates","current","send","console","log","value"],"mappings":"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","sourcesContent":["import { useMachine } from \"@xstate/react\";\nimport { useState } from \"react\";\nimport { assign, Machine } from \"xstate\";\nimport Layout from \"../components/Layout\";\nimport Calendar from \"../features/schedule/components/Calendar\";\nimport TimeBar from \"../features/schedule/components/TimeBar\";\nimport firestore from \"../sideEffects/firebase\";\nimport Next from \"../static/svg/NextStep.jsx\";\n\nconst createMeeting = async event => {\n  const { payload } = event;\n  const db = await firestore();\n  db.collection(\"meetings\")\n    .add({ options: JSON.stringify(payload) })\n    .catch(error => error);\n};\n\nconst scheduleMachine = Machine({\n  id: \"schedule\",\n  initial: \"calendar\",\n  states: {\n    calendar: {\n      on: { CONFIRMED_DATES: \"times\" }\n    },\n    times: {\n      on: {\n        CONFIRMED_TIMES: \"loading\",\n        ADDED_NEW_DATE: \"calendar\"\n      }\n    },\n    loading: {\n      invoke: {\n        id: \"createMeeting\",\n        src: (context, event) => createMeeting(event),\n        onDone: {\n          target: \"ready\"\n        },\n        onError: {\n          target: \"failure\",\n          actions: assign({ error: (context, event) => event.data })\n        }\n      }\n    },\n    ready: {\n      on: { SELECTED_A_DATE: \"confirmed\" }\n    },\n    confirmed: {\n      type: \"final\"\n    },\n    failure: { type: \"final\" }\n  }\n});\n\nconst propTypes = {};\n\nconst defaultProps = {};\n\nconst getInitialProps = async () => {\n  const db = await firestore();\n  const meetings = await db\n    .collection(\"meetings\")\n    .get()\n    .then(snap => snap.forEach(doc => doc.data()))\n    .catch(error => error);\n\n  return { meetings, dog: \"dogx\" };\n};\n\nexport default function index({ meetings, dog }) {\n  const tomorrow = new Date(\n    new Date(new Date().setDate(new Date().getDate() + 1)).setHours(0, 0, 0, 0)\n  );\n\n  const [dates, setDates] = useState({\n    [tomorrow]: [[13, 14]]\n  });\n\n  const [current, send] = useMachine(scheduleMachine);\n  console.log(\"meetings\", meetings, dog);\n  return (\n    <Layout>\n      <section className=\"vh-100 vw-100 flex flex-column items-center justify-around pa0 ma0\">\n        {current.value === \"calendar\" && (\n          <>\n            <h1 className=\"f1\">Pick up to 3 dates to meet...</h1>\n            <Calendar handleSelect={setDates} dates={dates} />\n            <Next\n              action={() => send(\"CONFIRMED_DATES\")}\n              className=\"pointer grow\"\n            />\n          </>\n        )}\n\n        {current.value === \"times\" && (\n          <>\n            <TimeBar dates={dates} send={send} setDates={setDates} />\n            <Next\n              action={() => send({ type: \"CONFIRMED_TIMES\", payload: dates })}\n              className=\"pointer grow gray\"\n            />\n          </>\n        )}\n      </section>\n    </Layout>\n  );\n}\n\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = getInitialProps;\n"]},"metadata":{},"sourceType":"module"}