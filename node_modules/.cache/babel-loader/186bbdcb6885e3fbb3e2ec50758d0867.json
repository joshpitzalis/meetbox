{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/joshpitzalis/Desktop/meetbox/pages/index.jsx\";\nimport React from \"react\";\nimport { useMachine } from \"@xstate/react\";\nimport { useState } from \"react\";\nimport { collectionData } from \"rxfire/firestore\";\nimport { tap } from \"rxjs/operators\";\nimport { Machine } from \"xstate\";\nimport Layout from \"../components/Layout\";\nimport Calendar from \"../features/schedule/components/Calendar\";\nimport TimeBar from \"../features/schedule/components/TimeBar\";\nimport loadFirebase from \"../sideEffects/firebase\";\nimport Next from \"../static/svg/NextStep.jsx\";\nvar scheduleMachine = Machine({\n  id: \"schedule\",\n  initial: \"times\",\n  states: {\n    calendar: {\n      on: {\n        CONFIRMED_DATES: \"times\"\n      }\n    },\n    times: {\n      on: {\n        CONFIRMED_TIMES: \"ready\",\n        ADDED_NEW_DATE: \"calendar\"\n      }\n    },\n    ready: {\n      on: {\n        SELECTED_A_DATE: \"confirmed\"\n      }\n    },\n    confirmed: {\n      type: \"final\"\n    }\n  }\n});\nvar propTypes = {};\nvar defaultProps = {};\n\nvar initialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var firebase, db, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return loadFirebase();\n\n          case 2:\n            firebase = _context.sent;\n            db = firebase.firestore();\n            _context.next = 6;\n            return db.collection(\"polls\").get().then(function (snap) {\n              return snap.val();\n            }).catch(function (error) {\n              return console.log(\"error\", error);\n            });\n\n          case 6:\n            result = _context.sent;\n            return _context.abrupt(\"return\", result);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function initialProps() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default function index() {\n  var tomorrow = new Date(new Date(new Date().setDate(new Date().getDate() + 1)).setHours(0, 0, 0, 0));\n\n  var _useState = useState(_defineProperty({}, tomorrow, [[13, 14]])),\n      _useState2 = _slicedToArray(_useState, 2),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  var _useMachine = useMachine(scheduleMachine),\n      _useMachine2 = _slicedToArray(_useMachine, 2),\n      current = _useMachine2[0],\n      send = _useMachine2[1];\n\n  React.useEffect(function () {\n    var unsubscribe = collectionData(db && db.collection(\"polls\")).pipe(tap(function (poll) {\n      return console.log(\"This is just an observable!\", poll);\n    })).subscribe(function (polls) {\n      /* update UI */\n    });\n\n    (function () {\n      return unsubscribe();\n    });\n  }, []);\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"vh-100 vw-100 flex flex-column items-center justify-around pa0 ma0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, current.value === \"calendar\" && React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    className: \"f1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Pick up to 3 dates to meet...\"), React.createElement(Calendar, {\n    handleSelect: setDates,\n    dates: dates,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(Next, {\n    action: function action() {\n      return send(\"CONFIRMED_DATES\");\n    },\n    className: \"pointer grow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), current.value === \"times\" && React.createElement(React.Fragment, null, React.createElement(TimeBar, {\n    dates: dates,\n    send: send,\n    setDates: setDates,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(Next, {\n    action: function action() {\n      return send(\"CONFIRMED_TIMES\");\n    },\n    className: \"pointer grow gray\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }))));\n}\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = initialProps;","map":{"version":3,"sources":["/Users/joshpitzalis/Desktop/meetbox/pages/index.jsx"],"names":["useMachine","useState","collectionData","tap","Machine","Layout","Calendar","TimeBar","loadFirebase","Next","scheduleMachine","id","initial","states","calendar","on","CONFIRMED_DATES","times","CONFIRMED_TIMES","ADDED_NEW_DATE","ready","SELECTED_A_DATE","confirmed","type","propTypes","defaultProps","initialProps","firebase","db","firestore","collection","get","then","snap","val","catch","error","console","log","result","index","tomorrow","Date","setDate","getDate","setHours","dates","setDates","current","send","React","useEffect","unsubscribe","pipe","poll","subscribe","polls","value","getInitialProps"],"mappings":"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","sourcesContent":["import { useMachine } from \"@xstate/react\";\nimport { useState } from \"react\";\nimport { collectionData } from \"rxfire/firestore\";\nimport { tap } from \"rxjs/operators\";\nimport { Machine } from \"xstate\";\nimport Layout from \"../components/Layout\";\nimport Calendar from \"../features/schedule/components/Calendar\";\nimport TimeBar from \"../features/schedule/components/TimeBar\";\nimport loadFirebase from \"../sideEffects/firebase\";\nimport Next from \"../static/svg/NextStep.jsx\";\n\nconst scheduleMachine = Machine({\n  id: \"schedule\",\n  initial: \"times\",\n  states: {\n    calendar: {\n      on: { CONFIRMED_DATES: \"times\" }\n    },\n    times: {\n      on: {\n        CONFIRMED_TIMES: \"ready\",\n        ADDED_NEW_DATE: \"calendar\"\n      }\n    },\n    ready: {\n      on: { SELECTED_A_DATE: \"confirmed\" }\n    },\n    confirmed: {\n      type: \"final\"\n    }\n  }\n});\n\nconst propTypes = {};\n\nconst defaultProps = {};\n\nconst initialProps = async () => {\n  let firebase = await loadFirebase();\n  let db = firebase.firestore();\n  let result = await db\n    .collection(\"polls\")\n    .get()\n    .then(snap => snap.val())\n    .catch(error => console.log(\"error\", error));\n\n  return result;\n};\n\nexport default function index() {\n  const tomorrow = new Date(\n    new Date(new Date().setDate(new Date().getDate() + 1)).setHours(0, 0, 0, 0)\n  );\n\n  const [dates, setDates] = useState({\n    [tomorrow]: [[13, 14]]\n  });\n\n  const [current, send] = useMachine(scheduleMachine);\n\n  React.useEffect(() => {\n    const unsubscribe = collectionData(db && db.collection(\"polls\"))\n      .pipe(tap(poll => console.log(\"This is just an observable!\", poll)))\n      .subscribe(polls => {\n        /* update UI */\n      });\n    () => unsubscribe();\n  }, []);\n\n  return (\n    <Layout>\n      <section className=\"vh-100 vw-100 flex flex-column items-center justify-around pa0 ma0\">\n        {current.value === \"calendar\" && (\n          <>\n            <h1 className=\"f1\">Pick up to 3 dates to meet...</h1>\n            <Calendar handleSelect={setDates} dates={dates} />\n            <Next\n              action={() => send(\"CONFIRMED_DATES\")}\n              className=\"pointer grow\"\n            />\n          </>\n        )}\n\n        {current.value === \"times\" && (\n          <>\n            <TimeBar dates={dates} send={send} setDates={setDates} />\n            <Next\n              action={() => send(\"CONFIRMED_TIMES\")}\n              className=\"pointer grow gray\"\n            />\n          </>\n        )}\n      </section>\n    </Layout>\n  );\n}\n\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = initialProps;\n"]},"metadata":{},"sourceType":"module"}