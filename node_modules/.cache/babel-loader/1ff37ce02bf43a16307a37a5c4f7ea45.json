{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport { format } from \"date-fns\";\nimport React from \"react\";\nimport { PrimaryButton } from \"../../components/Buttons\";\nimport Layout from \"../../components/Layout\";\nimport { selectTime } from \"../../features/schedule/helpers/actions\";\nimport { convertToTimeInterval } from \"../../features/schedule/helpers/timeBarHelpers\";\nimport firebase from \"../../sideEffects/firebase\";\nvar propTypes = {};\nvar defaultProps = {};\n\nvar getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(url) {\n    var slug, meetings;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            slug = url.query.slug;\n            _context.next = 3;\n            return firebase.firestore().collection(\"meetings\").doc(slug).get().then(function (doc) {\n              return doc.exists && doc.data();\n            }).catch(function (error) {\n              return error;\n            });\n\n          case 3:\n            meetings = _context.sent;\n            return _context.abrupt(\"return\", {\n              meetings: meetings\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getInitialProps(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default function index(_ref2) {\n  var meetings = _ref2.meetings,\n      url = _ref2.url;\n\n  var options = _Object$entries(JSON.parse(meetings.options));\n\n  var slug = url.query.slug;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      selected = _React$useState2[0],\n      setSelected = _React$useState2[1];\n\n  var _React$useState3 = React.useState(meetings.date && meetings.time),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      confirmed = _React$useState4[0],\n      setConfirm = _React$useState4[1];\n\n  return React.createElement(Layout, null, React.createElement(\"div\", {\n    className: \"flex flex-column items-between justify-center h-100\"\n  }, confirmed ? React.createElement(\"h1\", {\n    className: \"f1 tc\"\n  }, \"Confirmed\") : React.createElement(\"h1\", {\n    className: \"f1 tc\"\n  }, \"Pick a time...\"), React.createElement(\"section\", {\n    className: \"flex items-center justify-center vh-50\"\n  }, options && options.map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        date = _ref4[0],\n        time = _ref4[1];\n\n    return time.map(function (time) {\n      return React.createElement(TimeBox, {\n        date: date,\n        time: time,\n        slug: slug,\n        setSelected: setSelected,\n        selected: {\n          date: meetings.date,\n          time: meetings.time\n        } || selected\n      });\n    });\n  })), selected && React.createElement(\"div\", {\n    className: \"tc w-100\"\n  }, React.createElement(PrimaryButton, {\n    text: \"Confirm\",\n    action: function action() {\n      selectTime(selected.date, selected.time, slug);\n      setConfirm(true);\n    }\n  }))));\n}\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = getInitialProps;\n\nvar TimeBox = function TimeBox(_ref5) {\n  var date = _ref5.date,\n      time = _ref5.time,\n      setSelected = _ref5.setSelected,\n      selected = _ref5.selected;\n  var picked = date === selected.date && time[0] === selected.time[0] && time[1] === selected.time[1];\n  console.log(\"selected\", selected);\n  return React.createElement(\"article\", {\n    className: \"mw5 center br3 pa3 pa4-ns mv3 ba b--black-10 pointer grow \".concat(picked ? \"bg-light-blue\" : \"bg-white\"),\n    key: date + time,\n    onClick: function onClick() {\n      return setSelected({\n        date: date,\n        time: time\n      });\n    }\n  }, React.createElement(\"div\", {\n    className: \"tc\"\n  }, React.createElement(\"h1\", {\n    className: \"f4 black-70\"\n  }, format(new Date(date), \"do MMMM\")), React.createElement(\"hr\", {\n    className: \"mw3 bb bw1 b--black-10\"\n  })), React.createElement(\"p\", {\n    className: \"lh-copy measure center f3 \"\n  }, convertToTimeInterval(time)));\n};","map":{"version":3,"sources":["/Users/joshpitzalis/Desktop/meetbox/pages/meet/index.jsx"],"names":["format","React","PrimaryButton","Layout","selectTime","convertToTimeInterval","firebase","propTypes","defaultProps","getInitialProps","url","slug","query","firestore","collection","doc","get","then","exists","data","catch","error","meetings","index","options","JSON","parse","useState","selected","setSelected","date","time","confirmed","setConfirm","map","TimeBox","picked","console","log","Date"],"mappings":"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","sourcesContent":["import { format } from \"date-fns\";\nimport React from \"react\";\nimport { PrimaryButton } from \"../../components/Buttons\";\nimport Layout from \"../../components/Layout\";\nimport { selectTime } from \"../../features/schedule/helpers/actions\";\nimport { convertToTimeInterval } from \"../../features/schedule/helpers/timeBarHelpers\";\nimport firebase from \"../../sideEffects/firebase\";\n\nconst propTypes = {};\n\nconst defaultProps = {};\n\nconst getInitialProps = async url => {\n  const slug = url.query.slug;\n  const meetings = await firebase\n    .firestore()\n    .collection(\"meetings\")\n    .doc(slug)\n    .get()\n    .then(doc => doc.exists && doc.data())\n    .catch(error => error);\n\n  return { meetings };\n};\n\nexport default function index({ meetings, url }) {\n  const options = Object.entries(JSON.parse(meetings.options));\n  const slug = url.query.slug;\n\n  const [selected, setSelected] = React.useState(false);\n\n  const [confirmed, setConfirm] = React.useState(\n    meetings.date && meetings.time\n  );\n\n  return (\n    <Layout>\n      <div className=\"flex flex-column items-between justify-center h-100\">\n        {confirmed ? (\n          <h1 className=\"f1 tc\">Confirmed</h1>\n        ) : (\n          <h1 className=\"f1 tc\">Pick a time...</h1>\n        )}\n        <section className=\"flex items-center justify-center vh-50\">\n          {options &&\n            options.map(([date, time]) =>\n              time.map(time => (\n                <TimeBox\n                  date={date}\n                  time={time}\n                  slug={slug}\n                  setSelected={setSelected}\n                  selected={\n                    { date: meetings.date, time: meetings.time } || selected\n                  }\n                />\n              ))\n            )}\n        </section>\n        {selected && (\n          <div className=\"tc w-100\">\n            <PrimaryButton\n              text=\"Confirm\"\n              action={() => {\n                selectTime(selected.date, selected.time, slug);\n                setConfirm(true);\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n\nindex.propTypes = propTypes;\nindex.defaultProps = defaultProps;\nindex.getInitialProps = getInitialProps;\n\nconst TimeBox = ({ date, time, setSelected, selected }) => {\n  const picked =\n    date === selected.date &&\n    time[0] === selected.time[0] &&\n    time[1] === selected.time[1];\n\n  console.log(\"selected\", selected);\n  return (\n    <article\n      className={`mw5 center br3 pa3 pa4-ns mv3 ba b--black-10 pointer grow ${\n        picked ? \"bg-light-blue\" : \"bg-white\"\n      }`}\n      key={date + time}\n      onClick={() => setSelected({ date, time })}\n    >\n      <div className=\"tc\">\n        <h1 className=\"f4 black-70\">{format(new Date(date), \"do MMMM\")}</h1>\n        <hr className=\"mw3 bb bw1 b--black-10\" />\n      </div>\n      <p className=\"lh-copy measure center f3 \">\n        {convertToTimeInterval(time)}\n      </p>\n    </article>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}