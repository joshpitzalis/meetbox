{"code":"!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,r){\"use strict\";function n(t){return!x(t)&&\"value\"in t&&\"tree\"in t&&\"history\"in t}function i(t){return Object.keys(t)}function o(t,e,r){void 0===r&&(r=T);var n=u(t,r),a=u(e,r);return x(a)?!!x(n)&&a===n:x(n)?n in a:i(n).every(function(t){return!!(t in a)&&o(n[t],a[t])})}function a(t){try{return x(t)||\"number\"==typeof t?\"\"+t:t.type}catch(t){throw new Error(\"Events must be strings or objects with a string event.type property.\")}}function s(t,e){try{return m(t)?t:t.toString().split(e)}catch(e){throw new Error(\"'\"+t+\"' is not a valid state path.\")}}function u(t,e){return n(t)?t.value:m(t)?c(t):\"string\"==typeof t||n(t)?c(s(t,e)):t}function c(t){if(1===t.length)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function h(t,e){for(var r,n={},o=i(t),a=0;a<o.length;a++)n[r=o[a]]=e(t[r],r,t,a);return n}function l(t,e,r){var n,o,a={};try{for(var s=B(i(t)),u=s.next();!u.done;u=s.next()){var c=u.value,h=t[c];r(h)&&(a[c]=e(h,c,t))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a}function f(t){return t?x(t)?[[t]]:d(i(t).map(function(e){var r=t[e];return\"string\"==typeof r||r&&Object.keys(r).length?f(t[e]).map(function(t){return[e].concat(t)}):[[e]]})):[[]]}function d(t){var e;return(e=[]).concat.apply(e,U(t))}function v(t){return m(t)?t:void 0===t?[]:[t]}function p(t,e){var r,n,i=F([[],[]],2),o=i[0],a=i[1];try{for(var s,u=B(t),c=u.next();!c.done;c=u.next())e(s=c.value)?o.push(s):a.push(s)}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return[o,a]}function y(t,e){return{current:e,states:function t(e,r){return h(e.states,function(e,n){if(e){var i=(x(r)?void 0:r[n])||(e?e.current:void 0);return i?{current:i,states:t(e,i)}:void 0}})}(t,e)}}function g(t,e,r){return t?r.reduce(function(t,r){var n,o,a=r.assignment,s={};if(b(a))s=a(t,e||{type:C.Init});else try{for(var u=B(i(a)),c=u.next();!c.done;c=u.next()){var h=c.value,l=a[h];s[h]=b(l)?l(t,e):l}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return Object.assign({},t,s)},t):t}function m(t){return Array.isArray(t)}function b(t){return\"function\"==typeof t}function x(t){return\"string\"==typeof t}function S(t,e){return t?x(t)?{type:M,name:t,predicate:e?e[t]:void 0}:b(t)?{type:M,name:t.name,predicate:t}:t:void 0}function N(t){try{return\"__xstatenode\"in t}catch(t){return!1}}function w(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(x(\"string\"===t||typeof e))return t===e;var r=i(t),n=i(e);return r.length===n.length&&r.every(function(r){return w(t[r],e[r])})}function E(t,e){if(x(t)||\"number\"==typeof t){var r={type:t};return e&&Object.assign(r,e),r}return t}function O(t,e){return e&&e[t]||void 0}function P(t,e){var r;if(x(t)||\"number\"==typeof t){var n=O(t,e);r=b(n)?{type:t,exec:n}:n||{type:t,exec:void 0}}else if(b(t))r={type:t.name||t.toString(),exec:t};else{if(b(n=O(t.type,e)))r=$({},t,{exec:n});else if(n){var i=t.type,o=tt(t,[\"type\"]);r=$({type:i},n,o)}else r=t}return Object.defineProperty(r,\"toString\",{value:function(){return r.type},enumerable:!1,configurable:!0}),r}function j(t){var e=P(t);return $({id:x(t)?t:e.id},e,{type:e.type})}function _(t){return{type:q,event:t}}function V(t,e){return{to:e?e.to:void 0,type:K,event:b(t)?t:E(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:b(t)?t.name:a(t)}}function k(t,e,r){var n=b(t.event)?E(t.event(e,r)):E(t.event),i=b(t.delay)?t.delay(e,r):t.delay,o=b(t.to)?t.to(e,r):t.to;return $({},t,{to:o,event:n,delay:i})}function I(t,e){var r=e?\"#\"+e:\"\";return C.After+\"(\"+t+\")\"+r}function D(t,e){var r=C.DoneState+\".\"+t,n={type:r,data:e,toString:function(){return r}};return n}var C,R;r.r(e),function(t){t.Start=\"xstate.start\",t.Stop=\"xstate.stop\",t.Raise=\"xstate.raise\",t.Send=\"xstate.send\",t.Cancel=\"xstate.cancel\",t.NullEvent=\"\",t.Assign=\"xstate.assign\",t.After=\"xstate.after\",t.DoneState=\"done.state\",t.DoneInvoke=\"done.invoke\",t.Log=\"xstate.log\",t.Init=\"xstate.init\",t.Invoke=\"xstate.invoke\",t.ErrorExecution=\"error.execution\",t.ErrorCommunication=\"error.communication\",t.ErrorPlatform=\"error.platform\",t.Update=\"xstate.update\",t.Pure=\"xstate.pure\"}(C||(C={})),function(t){t.Parent=\"#_parent\",t.Internal=\"#_internal\"}(R||(R={}));var T=\".\",A={},M=\"xstate.guard\",B=function(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},F=function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},U=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F(arguments[e]));return t},L=function(t){return function(e){var r,n,i=e;try{for(var o=B(t),a=o.next();!a.done;a=o.next())i=i[a.value]}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},G=(function(){var t=0}(),function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}),H=function(){function t(t){this.actions=[],this.activities=A,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this.event=t.event,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||A,this.meta=t.meta||{},this.events=t.events||[],Object.defineProperty(this,\"tree\",{value:t.tree,enumerable:!1}),this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this)}return t.from=function(e,r){return e instanceof t?e.context===r?e:new t({value:e.value,context:r,event:e.event,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],tree:e.tree}):new t({value:e,context:r,event:{type:C.Init},historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[]})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n={type:C.Init};return new t({value:e.value,context:r,event:n,historyValue:e.historyValue,history:e.history,activities:e.activities,tree:e.tree})}return t.from(e,r)},Object.defineProperty(t.prototype,\"inert\",{get:function(){return t.inert(this,this.context)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nextEvents\",{get:function(){return this.tree?this.tree.nextEvents:[]},enumerable:!0,configurable:!0}),t.prototype.toStrings=function(t,e){var r=this;if(void 0===t&&(t=this.value),void 0===e&&(e=\".\"),x(t))return[t];var n=i(t);return n.concat.apply(n,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(G(arguments[e]));return t}(n.map(function(n){return r.toStrings(t[n]).map(function(t){return n+e+t})})))},t.prototype.matches=function(t){return o(t,this.value)},t}(),z=C.Start,J=C.Stop,q=C.Raise,K=C.Send,Q=C.Cancel,W=C.NullEvent,X=C.Assign,Y=(C.After,C.DoneState,C.Log,C.Init),Z=C.Invoke,$=(C.ErrorExecution,C.ErrorPlatform,C.Update,function(){return($=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)}),tt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&(r[n[i]]=t[n[i]])}return r},et={type:Y},rt=function(t,e){return t?(m(t)?t:[t]).map(function(t){return P(t,e)}):[]},nt=function(t){return{type:Q,sendId:t}},it=function(){return(it=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ot=function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},at=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ot(arguments[e]));return t},st=function(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},ut={resolved:!1},ct=function(){function t(e,r,n,i){var o,a=this;void 0===n&&(n=ut),this.stateNode=e,this.stateValue=r,this.parent=i,this.reentryNodes=new Set,this.root=this.parent?this.parent.root:this,this.nodes=r?x(r)?((o={})[r]=new t(e.getStateNode(r),void 0,void 0,this),o):h(r,function(r,n){return new t(e.getStateNode(n),r,void 0,a)}):{};var s=it({},ut,n);this.isResolved=s.resolved}return Object.defineProperty(t.prototype,\"done\",{get:function(){var t=this;switch(this.stateNode.type){case\"final\":return!0;case\"compound\":return\"final\"===this.nodes[i(this.nodes)[0]].stateNode.type;case\"parallel\":return i(this.nodes).every(function(e){return t.nodes[e].done});default:return!1}},enumerable:!0,configurable:!0}),t.prototype.getDoneData=function(t,e){if(this.done&&\"compound\"===this.stateNode.type){var r=this.nodes[i(this.nodes)[0]];return r.stateNode.data?function(t,e,r){var n,o;if(b(t))return t(e,r);var a={};try{for(var s=B(i(t)),u=s.next();!u.done;u=s.next()){var c=u.value,h=t[c];a[c]=b(h)?h(e,r):h}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a}(r.stateNode.data,t,e):void 0}},Object.defineProperty(t.prototype,\"atomicNodes\",{get:function(){var t=this;return\"atomic\"===this.stateNode.type||\"final\"===this.stateNode.type?[this.stateNode]:d(i(this.value).map(function(e){return t.value[e].atomicNodes}))},enumerable:!0,configurable:!0}),t.prototype.getDoneEvents=function(t){var e=this;if(!t||!t.size)return[];if(t.has(this.stateNode)&&\"final\"===this.stateNode.type)return[D(this.stateNode.id,this.stateNode.data)];var r=d(i(this.nodes).map(function(r){return e.nodes[r].getDoneEvents(t)}));if(\"parallel\"===this.stateNode.type){var n=i(this.nodes).every(function(t){return e.nodes[t].done});return r&&n?r.concat(D(this.stateNode.id)):r}if(!this.done||!r.length)return r;var o=1===r.length?r[0].data:void 0;return r.concat(D(this.stateNode.id,o))},Object.defineProperty(t.prototype,\"resolved\",{get:function(){var e=new t(this.stateNode,this.stateNode.resolve(this.value),{resolved:!0});return e.reentryNodes=this.reentryNodes,e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paths\",{get:function(){return f(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"absolute\",{get:function(){for(var e,r=this.stateValue,n={},i=n,o=0;o<this.stateNode.path.length;o++)e=this.stateNode.path[o],o===this.stateNode.path.length-1?i[e]=r:(i[e]={},i=i[e]);var a=new t(this.stateNode.machine,n);return a.reentryNodes=this.reentryNodes,a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"nextEvents\",{get:function(){var t=this,e=this.stateNode.ownEvents,r=d(i(this.nodes).map(function(e){return t.nodes[e].nextEvents}));return at(new Set(r.concat(e)))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.stateNode,this.value,void 0,this.parent)},t.prototype.combine=function(t){var e,r,n;if(t.stateNode!==this.stateNode)throw new Error(\"Cannot combine distinct trees\");var o=this.clone();if(t.root.reentryNodes.forEach(function(t){o.root.addReentryNode(t)}),\"compound\"===this.stateNode.type){if(!i(this.nodes).length||!i(t.nodes).length)return u=Object.assign({},this.nodes,t.nodes),o.nodes=u,o;var a=i(this.nodes)[0];return(e={})[a]=this.nodes[a].combine(t.nodes[a]),u=e,o.nodes=u,o}if(\"parallel\"===this.stateNode.type){var s=new Set(at(i(this.nodes),i(t.nodes))),u={};try{for(var c,h=st(s),l=h.next();!l.done;l=h.next())u[c=l.value]=this.nodes[c]&&t.nodes[c]?this.nodes[c].combine(t.nodes[c]):this.nodes[c]||t.nodes[c]}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return o.nodes=u,o}return this},Object.defineProperty(t.prototype,\"value\",{get:function(){if(\"atomic\"===this.stateNode.type||\"final\"===this.stateNode.type)return{};if(\"parallel\"===this.stateNode.type)return h(this.nodes,function(t){return t.value});if(\"compound\"===this.stateNode.type){if(0===i(this.nodes).length)return{};var t=this.nodes[i(this.nodes)[0]].stateNode;return\"atomic\"===t.type||\"final\"===t.type?t.key:h(this.nodes,function(t){return t.value})}return{}},enumerable:!0,configurable:!0}),t.prototype.matches=function(t){return o(t,this.value)},t.prototype.getEntryExitStates=function(t){var e,r,n=this,o=this.root.reentryNodes;if(!t)return{exit:[],entry:at(o)};if(t.stateNode!==this.stateNode)throw new Error(\"Cannot compare distinct trees\");switch(this.stateNode.type){case\"compound\":var a={exit:[],entry:[]},s=i(this.nodes)[0],u=i(t.nodes)[0];return s===u?a=this.nodes[s].getEntryExitStates(t.nodes[u]):(a.exit=t.nodes[u].getExitStates(),a.entry=this.nodes[s].getEntryStates()),o&&o.has(this.stateNode)&&(a.exit.push(this.stateNode),a.entry.unshift(this.stateNode)),a;case\"parallel\":var c=i(this.nodes).map(function(e){return n.nodes[e].getEntryExitStates(t.nodes[e])}),h={exit:[],entry:[]};try{for(var l,f=st(c),d=f.next();!d.done;d=f.next())l=d.value,h.exit=at(h.exit,l.exit),h.entry=at(h.entry,l.entry)}catch(t){e={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}return o&&o.has(this.stateNode)&&(h.exit.push(this.stateNode),h.entry.unshift(this.stateNode)),h;case\"atomic\":default:return o&&o.has(this.stateNode)?{exit:[this.stateNode],entry:[this.stateNode]}:{exit:[],entry:[]}}},t.prototype.getEntryStates=function(){var t=this;return this.nodes?[this.stateNode].concat(d(i(this.nodes).map(function(e){return t.nodes[e].getEntryStates()}))):[this.stateNode]},t.prototype.getExitStates=function(){var t=this;return this.nodes?d(i(this.nodes).map(function(e){return t.nodes[e].getExitStates()})).concat(this.stateNode):[this.stateNode]},t.prototype.addReentryNode=function(t){this.root.reentryNodes.add(t)},t}(),ht=function(){return(ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},lt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&(r[n[i]]=t[n[i]])}return r},ft=function(t,e){var r=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},dt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ft(arguments[e]));return t},vt=function(t){var e=\"function\"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},pt=\"\",yt={},gt=function(t){return\"#\"===t[0]},mt=function(){return{actions:{},guards:{},services:{},activities:{},delays:{},updater:g}},bt=function(){function t(e,r,n){var o=this;this.context=n,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,transitions:void 0},this.idMap={};var a=e.parent,s=lt(e,[\"parent\"]);this.config=s,this.parent=a,this.options=ht({},mt(),r),this.key=e.key||e.id||\"(machine)\",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=e.delimiter||(this.parent?this.parent.delimiter:\".\"),this.id=e.id||(this.machine?dt([this.machine.key],this.path).join(this.delimiter):this.key),this.version=this.parent?this.parent.version:e.version,this.type=e.type||(e.parallel?\"parallel\":e.states&&i(e.states).length?\"compound\":e.history?\"history\":\"atomic\"),this.initial=e.initial,this.order=e.order||-1,this.states=e.states?h(e.states,function(e,r,n,i){var a,s=new t(ht({},e,{key:r,order:void 0===e.order?i:e.order,parent:o}));return Object.assign(o.idMap,ht(((a={})[s.id]=s,a),s.idMap)),s}):yt,this.history=!0===e.history?\"shallow\":e.history||!1,this._transient=!(!e.on||!e.on[pt]),this.strict=!!e.strict,this.onEntry=v(e.entry||e.onEntry).map(function(t){return P(t)}),this.onExit=v(e.exit||e.onExit).map(function(t){return P(t)}),this.meta=e.meta,this.data=\"final\"===this.type?e.data:void 0,this.invoke=v(e.invoke).map(function(t,e){var r,n;if(N(t))return(o.parent||o).options.services=ht(((r={})[t.id]=t,r),(o.parent||o).options.services),{type:Z,src:t.id,id:t.id};if(\"string\"!=typeof t.src){var i=o.id+\":invocation[\"+e+\"]\";return o.machine.options.services=ht(((n={})[i]=t.src,n),o.machine.options.services),ht({type:Z,id:i},t,{src:i})}return ht({},t,{type:Z,id:t.id||t.src,src:t.src})}),this.activities=v(e.activities).concat(this.invoke).map(function(t){return j(t)}),this.after=this.getDelayedTransitions()}return t.prototype.withConfig=function(e,r){void 0===r&&(r=this.context);var n=this.options,i=n.actions,o=n.activities,a=n.guards,s=n.services,u=n.delays;return new t(this.config,{actions:ht({},i,e.actions),activities:ht({},o,e.activities),guards:ht({},a,e.guards),services:ht({},s,e.services),delays:ht({},u,e.delays)},r)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,\"definition\",{get:function(){return{id:this.id,key:this.key,version:this.version,type:this.type,initial:this.initial,history:this.history,states:h(this.states,function(t){return t.definition}),on:this.on,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data,invoke:this.invoke}},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,\"on\",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"transitions\",{get:function(){var t=this;return d(i(this.on).map(function(e){return t.on[e]}))},enumerable:!0,configurable:!0}),t.prototype.getDelayedTransitions=function(){var t=this;if(this.after)return this.after;var e=this.config.after,r=this.machine.options.guards;if(!e)return[];if(m(e))return e.map(function(e,n){var i,o=e.delay,a=e.target;b(o)?(i=t.id+\":delay[\"+n+\"]\",t.options.delays[i]=o):i=o;var s=I(i,t.id);return t.onEntry.push(V(s,{delay:o})),t.onExit.push(nt(s)),ht({event:s},e,{target:void 0===a?void 0:v(a),cond:S(e.cond,r),actions:v(e.actions).map(function(t){return P(t)})})});var n=d(i(e).map(function(n){var i=e[n],o=isNaN(+n)?n:+n,a=I(o,t.id);return t.onEntry.push(V(a,{delay:o})),t.onExit.push(nt(a)),x(i)?[{target:[i],delay:o,event:a,actions:[]}]:v(i).map(function(t){return ht({event:a,delay:o},t,{target:void 0===t.target?t.target:v(t.target),cond:S(t.cond,r),actions:v(t.actions).map(function(t){return P(t)})})})}));return n.sort(function(t,e){return x(t)||x(e)?0:+t.delay-+e.delay}),n},t.prototype.getStateNodes=function(t){var e,r=this;if(!t)return[];var n=t instanceof H?t.value:u(t,this.delimiter);if(x(n)){var o=this.getStateNode(n).initial;return void 0===o?[this.states[n]]:this.getStateNodes(((e={})[n]=o,e))}var a=i(n);return a.map(function(t){return r.getStateNode(t)}).concat(a.reduce(function(t,e){var i=r.getStateNode(e).getStateNodes(n[e]);return t.concat(i)},[]))},t.prototype.handles=function(t){var e=a(t);return-1!==this.events.indexOf(e)},t.prototype.resolveState=function(t){return new H(ht({},t,{value:this.resolve(t.value),tree:this.getStateTree(t.value)}))},t.prototype.transitionLeafNode=function(t,e,r){var n=this.getStateNode(t).next(e,r);if(!n.tree){var i=this.next(e,r),o=i.actions;return{tree:i.tree,source:e,actions:o}}return n},t.prototype.transitionCompoundNode=function(t,e,r){var n=i(t),o=this.getStateNode(n[0])._transition(t[n[0]],e,r);if(!o.tree){var a=this.next(e,r),s=a.actions;return{tree:a.tree,source:e,actions:s}}return o},t.prototype.transitionParallelNode=function(t,e,r){var n,a,s=this,c=[],h={};try{for(var l=vt(i(t)),f=l.next();!f.done;f=l.next()){var v=f.value,p=t[v];if(p){var y=this.getStateNode(v)._transition(p,e,r);y.tree||c.push(v),h[v]=y}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}if(!i(h).some(function(t){return void 0!==h[t].tree})){var g=this.next(e,r),m=g.actions;return{tree:g.tree,source:e,actions:m}}var b=i(h).map(function(t){return h[t].tree}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.combine(e)});return 1!==b.paths.length||o(u(this.path,this.delimiter),b.value)?{tree:i(h).map(function(t){var r=h[t].tree;if(r)return r;var n=L(s.path)(e.value)[t];return new ct(s.getStateNode(t),n).absolute}).reduce(function(t,e){return t.combine(e)}),source:e,actions:d(i(h).map(function(t){return h[t].actions}))}:{tree:b,source:e,actions:d(i(h).map(function(t){return h[t].actions}))}},t.prototype._transition=function(t,e,r){return x(t)?this.transitionLeafNode(t,e,r):1===i(t).length?this.transitionCompoundNode(t,e,r):this.transitionParallelNode(t,e,r)},t.prototype.next=function(e,r){var n,i,a=this,s=r.type,c=this.on[s];if(!c||!c.length)return{tree:void 0,source:e,actions:[]};var h,l=this._transient?[{type:W}]:[],f=[];try{for(var p=vt(c),y=p.next();!y.done;y=p.next()){var g=y.value,m=g.cond,b=g.in,S=e.context,N=!b||(x(b)&&gt(b)?e.matches(u(this.getStateNodeById(b).path,this.delimiter)):o(u(b,this.delimiter),L(this.path.slice(0,-2))(e.value))),w=!1;try{w=!m||this.evaluateGuard(m,S,r,e)}catch(t){throw new Error(\"Unable to evaluate guard '\"+(m.name||m.type)+\"' in transition for event '\"+s+\"' in state node '\"+this.id+\"':\\n\"+t.message)}if(w&&N){void 0!==g.target&&(f=g.target),l.push.apply(l,dt(v(g.actions))),h=g;break}}}catch(t){n={error:t}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}if(!f.length)return{tree:h&&e.value?new ct(this,L(this.path)(e.value)).absolute:void 0,source:e,actions:l};var E=d(f.map(function(r){return r instanceof t?r:a.getRelativeStateNodes(r,e.historyValue)})),O=!!h.internal?[]:d(E.map(function(t){return a.nodesFromChild(t)})),P=E.map(function(t){return t.tree}).reduce(function(t,e){return t.combine(e)});return O.forEach(function(t){return P.addReentryNode(t)}),{tree:P,source:e,actions:l}},Object.defineProperty(t.prototype,\"tree\",{get:function(){var t=u(this.path,this.delimiter);return new ct(this.machine,t)},enumerable:!0,configurable:!0}),t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],r=t;r&&r!==this;)e.push(r),r=r.parent;return e.push(this),e},t.prototype.getStateTree=function(t){return new ct(this,t)},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.evaluateGuard=function(t,e,r,n){var i=this.machine.options.guards,o={state:n,cond:t};if(t.type===M)return t.predicate(e,r,o);if(!i[t.type])throw new Error(\"Guard '\"+t.type+\"' is not implemented on machine '\"+this.machine.id+\"'.\");return(0,i[t.type])(e,r,o)},t.prototype.getActions=function(t,e){var r=t.tree?t.tree.resolved.getEntryExitStates(e?this.getStateTree(e.value):void 0):{entry:[],exit:[]},n=t.tree?t.tree.getDoneEvents(new Set(r.entry)):[];t.source||(r.exit=[],r.entry.unshift(this));var i=new Set(r.entry),o=new Set(r.exit),a=ft([d(Array.from(i).map(function(t){return dt(t.activities.map(function(t){return function(t){var e=j(t);return{type:C.Start,activity:e,exec:void 0}}(t)}),t.onEntry)})).concat(n.map(_)),d(Array.from(o).map(function(t){return dt(t.onExit,t.activities.map(function(t){return function(t){var e=j(t);return{type:C.Stop,activity:e,exec:void 0}}(t)}))}))],2),s=a[0],u=a[1];return rt(u.concat(t.actions).concat(s),this.machine.options.actions)},t.prototype.transition=function(t,e,r){var n;if(t instanceof H)n=void 0===r?t:this.resolveState(H.from(t,r));else{var i=x(t)?this.resolve(c(this.getResolvedPath(t))):this.resolve(t),o=r||this.machine.context;n=this.resolveState(H.from(i,o))}var a=E(e),s=a.type;if(this.strict&&-1===this.events.indexOf(s)&&!function(t){return 0===t.indexOf(C.DoneState)||0===t.indexOf(C.DoneInvoke)||t===C.ErrorCommunication||t===C.ErrorExecution||0===t.indexOf(C.ErrorPlatform)}(s))throw new Error(\"Machine '\"+this.id+\"' does not accept event '\"+s+\"'\");var u=this._transition(n.value,n,a);return u.tree&&(u.tree=u.tree.resolved),this.resolveTransition(u,n,a)},t.prototype.resolveTransition=function(t,e,r){var n,i,o,a=this,s=t.tree?t.tree.value:void 0,u=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,c=e?e.context:t.context||this.machine.context,h=r||{type:C.Init},l=this.getActions(t,e),f=e?ht({},e.activities):{};try{for(var v,g=vt(l),m=g.next();!m.done;m=g.next())(v=m.value).type===z?f[v.activity.type]=v:v.type===J&&(f[v.activity.type]=!1)}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}var b=ft(p(l,function(t){return t.type===q||t.type===W}),2),S=b[0],N=b[1],E=ft(p(N,function(t){return t.type===X}),2),O=E[0],j=E[1],_=O.length?this.options.updater(c,h,O):c,V=d(j.map(function(t){if(t.type===K){var e=k(t,_,h||{type:C.Init});if(x(e.delay)){if(!a.machine.options.delays||void 0===a.machine.options.delays[e.delay])return e;var r=a.machine.options.delays[e.delay];e.delay=\"number\"==typeof r?r:r(_,h||{type:C.Init})}return e}return t.type===C.Pure?t.get(_,h)||[]:P(t,a.options.actions)})),I=s?this.getStateNodes(s):[];I.some(function(t){return t._transient})&&S.push({type:W});var D=dt([this],I).reduce(function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t},{}),R=new H({value:s||e.value,context:_,event:h||et,historyValue:s?u?y(u,s):void 0:e?e.historyValue:void 0,history:!s||t.source?e:void 0,actions:s?V:[],activities:s?f:e?e.activities:{},meta:s?D:e?e.meta:void 0,events:s?S:[],tree:s?t.tree:e?e.tree:void 0});R.changed=!!O.length;var T=R.history;if(T&&delete T.history,!s)return R;for(var A=R;S.length;){var M=A.actions,B=S.shift();(A=this.transition(A,B.type===W?pt:B.event,A.context)).event=h,(o=A.actions).unshift.apply(o,dt(M))}var F=T?!!A.actions.length||!!O.length||typeof T.value!=typeof A.value||!w(A.value,T.value):void 0;return A.changed=F,A.historyValue=R.historyValue,A.history=T,A},t.prototype.ensureValidPaths=function(){},t.prototype.getStateNode=function(t){if(gt(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error(\"Unable to retrieve child state '\"+t+\"' from '\"+this.id+\"'; no child states exist.\");var e=this.states[t];if(!e)throw new Error(\"Child state '\"+t+\"' does not exist on '\"+this.id+\"'\");return e},t.prototype.getStateNodeById=function(t){var e=gt(t)?t.slice(\"#\".length):t;if(e===this.id)return this;var r=this.machine.idMap[e];if(!r)throw new Error(\"Child state node '#\"+e+\"' does not exist on machine '\"+this.id+\"'\");return r},t.prototype.getStateNodeByPath=function(t){if(\"string\"==typeof t&&gt(t))try{return this.getStateNodeById(t.slice(1))}catch(e){}for(var e,r=s(t,this.delimiter).slice(),n=this;r.length&&(e=r.shift()).length;)n=n.getStateNode(e);return n},t.prototype.resolve=function(t){var e,r=this;if(!t)return this.initialStateValue||yt;switch(this.type){case\"parallel\":return h(this.initialStateValue,function(e,n){return e?r.getStateNode(n).resolve(t[n]||e):yt});case\"compound\":if(x(t)){var n=this.getStateNode(t);return\"parallel\"===n.type||\"compound\"===n.type?((e={})[t]=n.initialStateValue,e):t}return i(t).length?h(t,function(t,e){return t?r.getStateNode(e).resolve(t):yt}):this.initialStateValue||{};default:return t||yt}},Object.defineProperty(t.prototype,\"resolvedStateValue\",{get:function(){var t,e,r=this.key;if(\"parallel\"===this.type)return(t={})[r]=l(this.states,function(t){return t.resolvedStateValue[t.key]},function(t){return\"history\"!==t.type}),t;if(void 0===this.initial)return r;if(!this.states[this.initial])throw new Error(\"Initial state '\"+this.initial+\"' not found on '\"+r+\"'\");return(e={})[r]=this.states[this.initial].resolvedStateValue,e},enumerable:!0,configurable:!0}),t.prototype.getResolvedPath=function(t){if(gt(t)){var e=this.machine.idMap[t.slice(\"#\".length)];if(!e)throw new Error(\"Unable to find state node '\"+t+\"'\");return e.path}return s(t,this.delimiter)},Object.defineProperty(t.prototype,\"initialStateValue\",{get:function(){if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var t=\"parallel\"===this.type?l(this.states,function(t){return t.initialStateValue||yt},function(t){return\"history\"!==t.type}):x(this.resolvedStateValue)?void 0:this.resolvedStateValue[this.key];return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!0,configurable:!0}),t.prototype.getInitialState=function(t,e){void 0===e&&(e=this.machine.context);var r=this.getStateTree(t);return this.getStateNodes(t).forEach(function(t){r.addReentryNode(t)}),this.resolveTransition({tree:r,source:void 0,actions:[],context:e})},Object.defineProperty(t.prototype,\"initialState\",{get:function(){if(this.__cache.initialState)return this.__cache.initialState;var t=this.initialStateValue;if(!t)throw new Error(\"Cannot retrieve initial state from simple state '\"+this.id+\"'.\");return this.__cache.initialState=this.getInitialState(t),this.__cache.initialState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"target\",{get:function(){var t;if(\"history\"===this.type){var e=this.config;t=e.target&&x(e.target)&&gt(e.target)?c(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),t.prototype.getStates=function(t){var e,r;if(x(t))return[this.states[t]];var n=[];try{for(var o,a=vt(i(t)),s=a.next();!s.done;s=a.next())o=s.value,n.push.apply(n,dt(this.states[o].getStates(t[o])))}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getRelativeStateNodes=function(t,e,r){if(void 0===r&&(r=!0),x(t)&&gt(t)){var n=this.getStateNodeById(t);return r?\"history\"===n.type?n.resolveHistory(e):n.initialStateNodes:[n]}var i=s(t,this.delimiter),o=(this.parent||this).getFromRelativePath(i,e);return r?d(o.map(function(t){return t.initialStateNodes})):o},Object.defineProperty(t.prototype,\"initialStateNodes\",{get:function(){var t=this;return\"atomic\"===this.type||\"final\"===this.type?[this]:\"compound\"!==this.type||this.initial?d(f(this.initialStateValue).map(function(e){return t.getFromRelativePath(e)})):[this]},enumerable:!0,configurable:!0}),t.prototype.getFromRelativePath=function(t,e){if(!t.length)return[this];var r=ft(t),n=r[0],i=r.slice(1);if(!this.states)throw new Error(\"Cannot retrieve subPath '\"+n+\"' from node with no states\");var o=this.getStateNode(n);if(\"history\"===o.type)return o.resolveHistory(e);if(!this.states[n])throw new Error(\"Child state '\"+n+\"' does not exist on '\"+this.id+\"'\");return this.states[n].getFromRelativePath(i,e)},t.prototype.historyValue=function(t){return i(this.states).length?{current:t||this.initialStateValue,states:l(this.states,function(e,r){if(!t)return e.historyValue();var n=x(t)?void 0:t[r];return e.historyValue(n||e.initialStateValue)},function(t){return!t.history})}:void 0},t.prototype.resolveHistory=function(t){var e=this;if(\"history\"!==this.type)return[this];var r=this.parent;if(!t)return this.target?d(f(this.target).map(function(t){return r.getFromRelativePath(t)})):r.initialStateNodes;var n=function(t,e){return function(r){var n,i,o=r;try{for(var a,s=B(t),u=s.next();!u.done;u=s.next())a=u.value,o=o[e][a]}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}}(r.path,\"states\")(t).current;return x(n)?[r.getStateNode(n)]:d(f(n).map(function(t){return\"deep\"===e.history?r.getFromRelativePath(t):[r.states[t[0]]]}))},Object.defineProperty(t.prototype,\"stateIds\",{get:function(){var t=this,e=d(i(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"events\",{get:function(){var t,e,r,n;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var s=vt(i(o)),u=s.next();!u.done;u=s.next()){var c=o[u.value];if(c.states)try{for(var h,l=vt(c.events),f=l.next();!f.done;f=l.next())h=f.value,a.add(\"\"+h)}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"ownEvents\",{get:function(){var t=this,e=new Set(i(this.on).filter(function(e){return t.on[e].some(function(t){return t.target||t.actions.length||!t.internal})}));return Array.from(e)},enumerable:!0,configurable:!0}),t.prototype.formatTransition=function(t,e,r){var n=this,i=e?e.internal:void 0,o=v(t),a=this.machine.options.guards,s=o.map(function(t){if(N(t))return\"#\"+t.id;var e=x(t)&&t[0]===n.delimiter;if(i=void 0===i?e:i,e&&!n.parent)return\"#\"+n.getStateNodeByPath(t.slice(1)).id;var o=e?n.key+t:\"\"+t;if(!n.parent)return\"#\"+n.getStateNodeByPath(o).id;try{return\"#\"+n.parent.getStateNodeByPath(o).id}catch(t){throw new Error(\"Invalid transition for state node '\"+n.id+\"' on event '\"+r+\"':\\n\"+t.message)}});if(void 0===e)return{target:void 0===t?void 0:s,actions:[],internal:void 0===t||i,event:r};var u=void 0===t||\"\"===t;return ht({},e,{actions:rt(v(e.actions)),cond:S(e.cond,a),target:u?void 0:s,internal:u&&void 0===i||i,event:r})},t.prototype.formatTransitions=function(){var t,e,r,n=this,i=this.config.on||yt,o=this.config.onDone?((t={})[\"\"+D(this.id)]=this.config.onDone,t):void 0,a=this.invoke.reduce(function(t,e){return e.onDone&&(t[function(t,e){var r=C.DoneInvoke+\".\"+t,n={type:r,data:e,toString:function(){return r}};return n}(e.id)]=e.onDone),e.onError&&(t[function(t,e){var r=C.ErrorPlatform+\".\"+t,n={type:r,data:e,toString:function(){return r}};return n}(e.id)]=e.onError),t},{}),s=this.after,u=h(ht({},i,o,a),function(t,e){return void 0===t?[{target:void 0,event:e,actions:[],internal:!0}]:m(t)?t.map(function(t){return n.formatTransition(t.target,t,e)}):x(t)||N(t)?[n.formatTransition([t],void 0,e)]:[n.formatTransition(t.target,t,e)]});try{for(var c,l=vt(s),f=l.next();!f.done;f=l.next())u[(c=f.value).event]=u[c.event]||[],u[c.event].push(c)}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return u},t}();console.log({Machine:function(t,e,r){return void 0===r&&(r=t.context),new bt(t,e,r)}})}]);","extractedComments":[]}